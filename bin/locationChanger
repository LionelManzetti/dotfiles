#!/bin/sh
exit 0
# get the ssid of the network you are on
# shown on two lines; should be one with a space
ssid=`ioreg -l -n AirPortDriver | grep IO80211SSID | sed 's/^.*= "\(.*\)".*$/\1/; s/ /_/g'`

# fill in your own values for ssid and location below
if [ $ssid = "utcetu" ]
then
    location="UTC"
else
    location="Automatic"
fi

# on recherche la configuration actuelle
currentloc=`scselect | awk '{if ($1=="*") print $3}' | sed 's/[()]//g'`

# si la config actuelle n'est pas la bonne
if [[ $currentloc != $location && $ssid != "" ]]
then
  # update the location
  newloc=`/usr/sbin/scselect ${location} | sed 's/^.*(\(.*\)).*$/\1/'`

  # exit with error if the location didn't match what you expected
  if [ ${location} != ${newloc} ]
  then
    terminal-notifier -title "LocationChanger" -group "netloc" -message "Impossible de changer la configuration réseau"
    exit 1
  fi

  terminal-notifier -title "LocationChanger" -group "netloc" -message "Configuration réseau changée à : ${location}"
fi

exit 0
